{{- partial "head/metadata.html" . -}}

{{- $critical := resources.Get "critical.css" -}}
{{- with $critical -}}
  <style>
    {{- .Content | safeCSS -}}
  </style>
{{- end -}}
{{- with partialCached "func/getStylesheet.html" . $.Lang -}}
<link rel="stylesheet"
  href="{{ .Permalink }}"
  media="print"
  onload="this.media='all'; this.onload=null;"
  integrity="{{ .Data.Integrity | html }}">
<noscript>
  <link
    rel="stylesheet"
    media="all"
    href="{{ .Permalink }}"
    integrity="{{ .Data.Integrity | html }}">
</noscript>
{{- end -}}

<!-- web monetization tag -->
{{ with site.Data.dnb.blocks.bootstrap5.config.monetization_url }}
  <meta name="monetization" content="{{ . }}">
{{ end }}

{{ $partialSocial := "head/social" }}
{{ if templates.Exists ( printf "partials/%s" $partialSocial ) }}
  {{ partial "head/opensearch" . }}
{{ end }}
{{ block "schema" . }}{{ end }}
{{ $partialOpensearch := "head/opensearch" }}
{{ if templates.Exists ( printf "partials/%s" $partialOpensearch ) }}
  {{ partial "head/opensearch" . }}
{{ end }}

{{- partialCached "head/statics" . -}}

<!-- webmanifest partial (if it exists) -->
{{- $partialPath := "head/pwa.html" -}}
{{- if templates.Exists (printf "partials/%s" $partialPath) -}}
  {{- partialCached $partialPath . -}}
{{- end -}}
